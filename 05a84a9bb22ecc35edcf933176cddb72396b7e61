{
  "comments": [
    {
      "key": {
        "uuid": "a6d0c3d6_76b8e659",
        "filename": "sepolicy/genfs_contexts",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2017-02-17T02:40:04Z",
      "side": 1,
      "message": "this isn\u0027t right. genfscon is for filesystems that do not support labeling. Debugfs does.\n\nOn Sailfish, without this change I see:\nsailfish:/ # ls -laZ /sys/kernel/debug/kgsl                                                     \ntotal 0\ndrwxr-xr-x  5 root root u:object_r:debugfs_kgsl:s0 0 1970-01-01 00:00 .\ndrwxr-xr-x 95 root root u:object_r:debugfs:s0      0 1970-01-01 00:00 ..\ndrwxr-xr-x  2 root root u:object_r:debugfs_kgsl:s0 0 1970-01-01 00:00 debug\n-r--r--r--  1 root root u:object_r:debugfs_kgsl:s0 0 1970-01-01 00:00 events\ndrwxr-xr-x  4 root root u:object_r:debugfs_kgsl:s0 0 1970-01-01 00:00 kgsl-3d0\ndrwxr-xr-x  6 root root u:object_r:debugfs_kgsl:s0 0 2017-02-16 23:38 proc",
      "range": {
        "startLine": 13,
        "startChar": 9,
        "endLine": 13,
        "endChar": 16
      },
      "revId": "05a84a9bb22ecc35edcf933176cddb72396b7e61",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0ee139b_4061fd6b",
        "filename": "sepolicy/genfs_contexts",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1115183
      },
      "writtenOn": "2017-02-17T02:52:33Z",
      "side": 1,
      "message": "The problem is that the subdirectories of /kgsl/proc are not getting labelled correctly when they\u0027re created for new processes - they\u0027re getting labeled as debugfs rather than debugfs_kgsl. How can I write the label to avoid this?",
      "parentUuid": "a6d0c3d6_76b8e659",
      "range": {
        "startLine": 13,
        "startChar": 9,
        "endLine": 13,
        "endChar": 16
      },
      "revId": "05a84a9bb22ecc35edcf933176cddb72396b7e61",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "19d880c1_6e530737",
        "filename": "sepolicy/genfs_contexts",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2017-02-17T03:12:31Z",
      "side": 1,
      "message": "I see. This doesn\u0027t fix that problem. Go ahead and change it back.\n\nThe issue is that the kernel is creating these files and it doesn\u0027t know about labels other than the default ones (debugfs in this case). Typically in /sys we have the kernel issue uevents when new files are created which are picked up by ueventd who then applies the proper labels.",
      "parentUuid": "d0ee139b_4061fd6b",
      "range": {
        "startLine": 13,
        "startChar": 9,
        "endLine": 13,
        "endChar": 16
      },
      "revId": "05a84a9bb22ecc35edcf933176cddb72396b7e61",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "97259de3_120d9b40",
        "filename": "sepolicy/hal_memtrack.te",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2017-02-17T17:27:18Z",
      "side": 1,
      "message": "Is this a short term fix to remove logspam? Do we need a bug tracking the real fix?\n\nHiding denials can make debugging issues difficult. If someone adds code that needs this access, it\u0027s blocked by selinux, but no denials are generated....",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 74
      },
      "revId": "05a84a9bb22ecc35edcf933176cddb72396b7e61",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c4303c2_92793a0d",
        "filename": "sepolicy/system_server.te",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2017-02-17T02:44:29Z",
      "side": 1,
      "message": "I ran \"dumpsys meminfo\" on Marlin last week and didn\u0027t see any new debugfs_kgsl denials. How are these denials triggered?",
      "revId": "05a84a9bb22ecc35edcf933176cddb72396b7e61",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b9877350_772919a7",
        "filename": "sepolicy/system_server.te",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 1115183
      },
      "writtenOn": "2017-02-17T02:52:33Z",
      "side": 1,
      "message": "dumpsys only works in passthrough mode right now because the kgsl/proc/\u003cpid\u003e/mem files are being labeled as debugfs (which system_server can access) rather than debugfs_kgsl (which it cannot). The other parts of this CL will break passthrough mode unless system_server gets this permission",
      "parentUuid": "1c4303c2_92793a0d",
      "revId": "05a84a9bb22ecc35edcf933176cddb72396b7e61",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9bcbc295_dd7018ad",
        "filename": "sepolicy/system_server.te",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2017-02-17T03:12:31Z",
      "side": 1,
      "message": "I see. So when I ran it, all the files were properly labled because no new ones had been generated since the last restorecon. That makes sense.",
      "parentUuid": "b9877350_772919a7",
      "revId": "05a84a9bb22ecc35edcf933176cddb72396b7e61",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}